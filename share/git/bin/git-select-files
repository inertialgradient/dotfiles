#!/usr/bin/env bash

# fuzzy-select files listed via `git status`
#
# Usage:
#   git select-files [FZF_OPTS]

git status -s |
  fzf --multi --tiebreak=index --layout=reverse $1 \
      --preview-window=up:75% \
      --preview='echo {} | sed -E "s/^.{2}\s+//" | xargs bat --color=always 2>/dev/null' |
      sed -E "s/^.{2}\s+//" |
      sed -E "s/[\"]//g" |
      sed -E "s/ /\ /"

