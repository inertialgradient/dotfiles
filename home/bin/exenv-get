#!/bin/bash

# Fuzzy-select a ruby to install using exenv

elixir_version=$(exenv install -ls |\
  sed "1 d" |\
  sed -e "s/^[ \t ]*//" |\
  fzf-tmux -l 25 --no-sort --reverse --tac --cycle --tiebreak=index)

if [[ -z $elixir_version ]]; then
  echo && echo 'No Elixir version selected.'
  exit 1
fi

echo && echo "Installing Elixir version: $elixir_version..."
echo "exenv install $elixir_version"
exenv install --verbose "$elixir_version"

echo && echo "Using Elixir $elixir_version in this shell session"
echo exenv shell "$elixir_version"
