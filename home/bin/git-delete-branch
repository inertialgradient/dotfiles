#!/usr/bin/env bash

# Delete local and remote branch `name`:
#
# $ git delete-branch integration

# Assert there is at least one branch provided

branch=$(git branch | cut -c 3- | fzf)
remote=$(git config branch.$branch.remote)

test -z $remote && remote="origin"
ref=$(git config branch.$branch.merge)
test -z $ref && ref="refs/heads/$branch"

git branch -D $branch
git branch -d -r $remote/$branch
git push $remote :$ref
